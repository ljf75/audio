(function(e,t){var n=tracking.isString,r=tracking.math.distance;tracking.type.COLOR={NAME:"COLOR",defaults:{color:"magenta",minFoundPixels:30},cyan:function(e,t,n){var r=50,i=50,s=e-0,o=t-255,u=n-255;return t-e>=r&&n-e>=i?!0:Math.sqrt(s*s+o*o+u*u)<80},magenta:function(e,t,n){var r=50,i=e-255,s=t-0,o=n-255;return e-t>=r&&n-t>=r?!0:Math.sqrt(i*i+s*s+o*o)<140},findCoordinates_:function(e,t){var n=this,r=0,i=0,s=0,o=Infinity,u=Infinity,a=-1,f=-1,l,c,h;for(h=0;h<t;h+=2)l=e[h],c=e[h+1],l>-1&&c>-1&&(r+=l,i+=c,s++,l<o&&(o=l),l>a&&(a=l),c<u&&(u=c),c>f&&(f=c));return{x:r/s,y:i/s,z:60-(a-o+(f-u))/2}},flagOutliers_:function(e,t){var n=this,i,s,o;for(s=0;s<t;s+=2){i=0;for(o=2;o<t;o+=2)i+=r(e[s],e[s+1],e[o],e[o+1]);i/t>30&&(e[s]=-1,e[s+1]=-1,t[s]--)}},track:function(e,t){var r=this,i=r.defaults,s,o,u=[],a=[],f,l;t.canvas.forEach(t.getVideoCanvasImageData(),function(f,h,p,d,v,m,g){for(o=-1;s=e[++o];)a[o]||(u[o]=0,a[o]=[]),l=s.color||i.color,n(l)&&r.hasOwnProperty(l)&&(l=r[l]),l(f,h,p,d,v,m,g)&&(u[o]+=2,a[o].push(g,m))});for(o=-1;s=e[++o];){if(u[o]<=i.minFoundPixels){s.onNotFound&&s.onNotFound.call(t,f);continue}r.flagOutliers_(a[o],u[o]),f=r.findCoordinates_(a[o],u[o]),f.pixels=a[o],s.onFound&&s.onFound.call(t,f)}}}})(window);